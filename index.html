<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>World of Tanks Progress Calculator</title>
    
    <meta name="description" content="Track your progress in World of Tanks Battle Pass and Marathon events. Calculate daily points and battles needed to reach your goal.">
    <meta name="keywords" content="World of Tanks, WOT, calculator, Battle Pass, Marathon, points, progress, event, player, tanks">
    <meta property="og:title" content="World of Tanks Progress Calculator">
    <meta property="og:description" content="Track your progress in World of Tanks Battle Pass and Marathon events. Calculate daily points and battles needed to reach your goal.">
    <meta property="og:image" content="https://placehold.co/600x315/FF0000/FFFFFF?text=WOT+CALCULATOR">
    <meta property="og:url" content="https://twoja-nazwa-uzytkownika.github.io/nazwa-repozytorium/">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="World of Tanks Progress Calculator">
    <meta name="twitter:description" content="Track your progress in World of Tanks Battle Pass and Marathon events. Calculate daily points and battles needed to reach your goal.">
    <meta name="twitter:image" content="https://placehold.co/600x315/FF0000/FFFFFF?text=WOT+CALCULATOR">

    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-200">

    <div id="app" class="min-h-screen bg-gray-900 text-gray-200 font-sans flex items-center justify-center p-4">
        <div class="w-full max-w-2xl p-6 space-y-6 rounded-xl shadow-2xl bg-gray-900 border-2 border-red-700">
            <div class="flex flex-col items-center space-y-2">
                <img src="https://placehold.co/100x100/1e293b/FFFFFF?text=WOT" alt="WOT Logo" class="rounded-full w-24 h-24" />
                <h1 class="text-4xl font-extrabold text-red-600">
                    WOT Calculator
                </h1>
                <p class="text-center text-gray-400">
                    Track your progress in World of Tanks events!
                </p>
            </div>

            <div id="event-buttons" class="flex justify-center space-x-4">
                <button
                    id="btn-battlepass17"
                    class="px-4 py-2 font-bold rounded-lg transition-all duration-300 bg-red-600 text-white shadow-lg"
                    data-event="battlepass17">
                    Battle Pass XVII
                </button>
                <button
                    id="btn-battlepass15year"
                    class="px-4 py-2 font-bold rounded-lg transition-all duration-300 bg-gray-700 text-gray-300 hover:bg-red-700"
                    data-event="battlepass15year">
                    Marathon
                </button>
            </div>

            <div id="server-buttons" class="flex justify-center space-x-2 text-sm text-gray-400">
                <button
                    class="px-3 py-1 rounded-full font-bold transition-colors bg-red-600 text-white"
                    data-server="EU">EU</button>
                <button
                    class="px-3 py-1 rounded-full font-bold transition-colors bg-gray-700 hover:bg-gray-600"
                    data-server="US">US</button>
                <button
                    class="px-3 py-1 rounded-full font-bold transition-colors bg-gray-700 hover:bg-gray-600"
                    data-server="ASIA">ASIA</button>
                <button
                    class="px-3 py-1 rounded-full font-bold transition-colors bg-gray-700 hover:bg-gray-600"
                    data-server="CN">CN</button>
            </div>

            <div class="bg-gray-800 p-6 rounded-xl shadow-inner border-2 border-gray-700">
                <h2 id="event-title" class="text-xl font-bold text-center"></h2>
                
                <div class="w-full space-y-2">
                    <div class="w-full h-8 rounded-full bg-gray-900 relative border-2 border-gray-700 overflow-hidden">
                        <div id="target-progress-bar" class="h-full absolute top-0 left-0 bg-amber-400 bg-opacity-30"></div>
                        <div id="current-progress-bar" class="h-full rounded-full transition-all duration-500 ease-out relative z-10"></div>
                        <span id="progress-percentage" class="absolute inset-0 flex items-center justify-center font-bold text-sm z-20"></span>
                    </div>
                    <div class="text-center">
                        <p id="progress-status"></p>
                    </div>
                </div>

                <div class="w-full">
                    <label for="current-progress-input" class="block mb-2 text-sm font-medium">
                        Your current progress (points):
                    </label>
                    <input
                        type="number"
                        id="current-progress-input"
                        min="0"
                        class="w-full p-2 mb-4 rounded-lg bg-gray-700 text-center"
                    />
                    <input
                        type="range"
                        id="current-progress-range"
                        min="0"
                        class="w-full h-2 rounded-lg appearance-none cursor-pointer range-lg bg-gray-700"
                    />
                    <div class="flex justify-between text-sm mt-2">
                        <span>0</span>
                        <span id="progress-values"></span>
                    </div>
                </div>

                <div class="grid w-full grid-cols-2 gap-4 text-center">
                    <div class="bg-gray-800 p-4 rounded-lg">
                        <p id="level-label" class="text-sm"></p>
                        <h3 id="current-level" class="text-3xl font-extrabold"></h3>
                    </div>
                    <div class="bg-gray-800 p-4 rounded-lg">
                        <p class="text-sm">Daily Average</p>
                        <h3 id="daily-average" class="text-3xl font-extrabold"></h3>
                    </div>
                </div>
                
                <div class="w-full p-4 rounded-lg bg-gray-700 mt-6">
                    <h3 class="text-lg font-bold mb-2">Daily Calculations</h3>
                    <div class="mb-4">
                        <label for="days-per-week" class="block text-sm mb-1">
                            Days played per week: <span id="days-per-week-value" class="font-bold">7</span>
                        </label>
                        <input
                            type="range"
                            id="days-per-week"
                            min="1"
                            max="7"
                            value="7"
                            class="w-full h-2 rounded-lg appearance-none cursor-pointer range-lg bg-gray-600"
                        />
                    </div>
                    <div class="mb-4">
                        <label for="daily-missions" class="block text-sm mb-1">
                            Daily missions: <span id="daily-missions-value" class="font-bold">0</span>
                        </label>
                        <input
                            type="range"
                            id="daily-missions"
                            min="0"
                            max="4"
                            value="0"
                            class="w-full h-2 rounded-lg appearance-none cursor-pointer range-lg bg-gray-600"
                        />
                    </div>
                    <div class="mb-4">
                        <label for="game-points" class="block text-sm mb-1">Points from battles (average):</label>
                        <input
                            type="number"
                            id="game-points"
                            min="0"
                            value="0"
                            class="w-full p-2 rounded-lg bg-gray-600 text-center"
                        />
                    </div>
                    <div class="text-center text-lg font-bold">
                        <p>Points from daily missions: <span id="points-from-missions">0</span></p>
                        <p>Points needed from battles: <span id="points-needed-from-battles">0</span></p>
                        <p class="mt-2">Estimated number of battles: <span id="games-needed">0</span></p>
                    </div>
                </div>
            </div>

            <div class="p-4 rounded-lg bg-gray-800 border border-gray-700">
                <div class="flex items-center space-x-2 text-gray-400">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="w-4 h-4" fill="currentColor"><path d="M128 0c17.7 0 32 14.3 32 32V64H288V32c0-17.7 14.3-32 32-32s32 14.3 32 32V64h48c26.5 0 48 21.5 48 48v32H0V112c0-26.5 21.5-48 48-48h48V32c0-17.7 14.3-32 32-32zm0 128H32V480c0 17.7 14.3 32 32 32H384c17.7 0 32-14.3 32-32V128H128zm96 64c17.7 0 32 14.3 32 32v96c0 17.7-14.3 32-32 32s-32-14.3-32-32V224c0-17.7 14.3-32 32-32zm-96 96c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7 14.3 32 32 32s32-14.3 32-32V288z"/></svg>
                    <p id="time-remaining"></p>
                </div>
            </div>

            <div class="p-4 rounded-lg bg-gray-800 border border-gray-700">
                <div class="flex items-center space-x-2 text-gray-400">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="w-4 h-4" fill="currentColor"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-384c13.3 0 24 10.7 24 24V264c0 13.3-10.7 24-24 24s-24-10.7-24-24V152c0-13.3 10.7-24 24-24zm32 224a32 32 0 1 1 -64 0 32 32 0 1 1 64 0z"/></svg>
                    <p>
                        Note: Data is for demonstration purposes. Enter your own values for accurate calculations.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const eventData = {
              battlepass17: {
                title: 'battlepass season XVII calculator',
                mode: 'Battlepass',
                totalPoint: 7500,
                timespan: {
                  ASIA: [new Date('2025/06/03 07:30:00 UTC+8'), new Date('2025/09/03 05:30:00 UTC+8')],
                  CN: [new Date('2025/06/05 08:30:00 UTC+8'), new Date('2025/09/04 01:59:00 UTC+8')],
                  US: [new Date('2025/06/03 06:30:00 UTC-7'), new Date('2025/09/04 07:30:00 UTC-7')],
                  EU: [new Date('2025/06/04 09:00:00 UTC+2'), new Date('2025/09/04 00:30:00 UTC+2')],
                },
              },
              battlepass15year: {
                title: '15 anniversary field festival calculator',
                mode: 'Marathon',
                totalPoint: 2500,
                timespan: {
                  ASIA: [new Date('2025/08/08 08:00:00 UTC+8'), new Date('2025/09/01 08:00:00 UTC+8')],
                  CN: [new Date('2025/08/08 08:00:00 UTC+8'), new Date('2025/09/01 08:00:00 UTC+8')],
                  US: [new Date('2025/08/08 22:00:00 UTC-7'), new Date('2025/09/01 22:00:00 UTC-7')],
                  EU: [new Date('2025/08/08 12:00:00 UTC+2'), new Date('2025/09/01 12:00:00 UTC+2')],
                },
              },
            };

            let activeEventId = 'battlepass17';
            let currentServer = 'EU';
            let currentProgress = 0;
            let daysPerWeek = 7;
            let dailyMissions = 0;
            let gamePoints = 0;
            let dailyAverage = 0;
            let gamesNeeded = 0;

            const eventTitleEl = document.getElementById('event-title');
            const eventButtons = document.getElementById('event-buttons');
            const serverButtons = document.getElementById('server-buttons');
            const currentProgressInput = document.getElementById('current-progress-input');
            const currentProgressRange = document.getElementById('current-progress-range');
            const progressPercentageEl = document.getElementById('progress-percentage');
            const progressStatusEl = document.getElementById('progress-status');
            const progressBarEl = document.getElementById('current-progress-bar');
            const targetProgressBarEl = document.getElementById('target-progress-bar');
            const progressValuesEl = document.getElementById('progress-values');
            const levelLabelEl = document.getElementById('level-label');
            const currentLevelEl = document.getElementById('current-level');
            const dailyAverageEl = document.getElementById('daily-average');
            const timeRemainingEl = document.getElementById('time-remaining');
            const daysPerWeekRange = document.getElementById('days-per-week');
            const daysPerWeekValue = document.getElementById('days-per-week-value');
            const dailyMissionsRange = document.getElementById('daily-missions');
            const dailyMissionsValue = document.getElementById('daily-missions-value');
            const gamePointsInput = document.getElementById('game-points');
            const pointsFromMissionsEl = document.getElementById('points-from-missions');
            const pointsNeededFromBattlesEl = document.getElementById('points-needed-from-battles');
            const gamesNeededEl = document.getElementById('games-needed');

            const calculateAll = () => {
                const currentEvent = eventData[activeEventId];
                const totalPoints = currentEvent.totalPoint;
                const now = new Date();
                const eventStart = currentEvent.timespan[currentServer][0];
                const eventEnd = currentEvent.timespan[currentServer][1];
                const timeRemainingMs = eventEnd - now;

                if (timeRemainingMs < 0) {
                    timeRemainingEl.textContent = 'Event has ended!';
                    dailyAverage = 0;
                } else if (now < eventStart) {
                    timeRemainingEl.textContent = 'Event has not started yet.';
                    dailyAverage = 0;
                } else {
                    const remainingDays = Math.max(0, Math.floor(timeRemainingMs / (1000 * 60 * 60 * 24)));
                    const remainingHours = Math.floor((timeRemainingMs % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    const remainingMinutes = Math.floor((timeRemainingMs % (1000 * 60 * 60)) / (1000 * 60));
                    const remainingSeconds = Math.floor((timeRemainingMs % (1000 * 60)) / 1000);
                    timeRemainingEl.textContent = `${remainingDays} days, ${String(remainingHours).padStart(2, '0')}:${String(remainingMinutes).padStart(2, '0')}:${String(remainingSeconds).padStart(2, '0')} remaining`;
                    
                    const totalPlayingDays = remainingDays * (daysPerWeek / 7);
                    dailyAverage = (totalPoints - currentProgress) / (totalPlayingDays || 1);
                }

                const progressPercentage = (currentProgress / totalPoints) * 100;
                const totalDurationMs = eventEnd - eventStart;
                const elapsedMs = now - eventStart;
                const targetProgressPercentage = (elapsedMs / totalDurationMs) * 100;
                const progressStatus = progressPercentage - targetProgressPercentage;

                progressBarEl.style.width = `${Math.min(100, progressPercentage)}%`;
                targetProgressBarEl.style.width = `${Math.min(100, targetProgressPercentage)}%`;
                progressPercentageEl.textContent = `${Math.round(progressPercentage)}%`;

                progressBarEl.className = `${progressPercentage >= 100 ? 'bg-green-500' : progressStatus > 0 ? 'bg-green-500' : 'bg-red-600'} h-full rounded-full transition-all duration-500 ease-out relative z-10`;

                if (progressPercentage >= 100) {
                    progressStatusEl.textContent = 'Congratulations! Goal achieved!';
                    progressStatusEl.classList.remove('text-red-400');
                    progressStatusEl.classList.add('text-green-400');
                } else if (progressStatus > 0) {
                    progressStatusEl.textContent = `Ahead by ${progressStatus.toFixed(1)}%!`;
                    progressStatusEl.classList.remove('text-red-400');
                    progressStatusEl.classList.add('text-green-400');
                } else {
                    progressStatusEl.textContent = `Behind by ${(progressStatus * -1).toFixed(1)}%.`;
                    progressStatusEl.classList.remove('text-green-400');
                    progressStatusEl.classList.add('text-red-400');
                }

                let missionPoints = 0;
                switch (dailyMissions) {
                    case 1: missionPoints = 10; break;
                    case 2: missionPoints = 10 + 15; break;
                    case 3: missionPoints = 10 + 15 + 20; break;
                    case 4: missionPoints = 10 + 15 + 20 + 25; break;
                }
                pointsFromMissionsEl.textContent = missionPoints;

                const pointsNeededFromBattles = Math.max(0, Math.ceil(dailyAverage) - missionPoints);
                gamesNeeded = Math.ceil(pointsNeededFromBattles / (gamePoints || 1));
                
                eventTitleEl.textContent = currentEvent.title;
                currentProgressInput.value = currentProgress;
                currentProgressRange.value = currentProgress;
                currentProgressRange.max = totalPoints;
                currentProgressInput.max = totalPoints;
                progressValuesEl.textContent = `${currentProgress.toLocaleString()} / ${totalPoints.toLocaleString()}`;
                
                let currentLevel = 0;
                if (currentEvent.mode === 'Battlepass') {
                    currentLevel = Math.min(75, Math.floor(currentProgress / 100) + 1);
                    levelLabelEl.textContent = 'Level';
                } else {
                    currentLevel = Math.min(50, Math.floor(currentProgress / 50) + 1);
                    levelLabelEl.textContent = 'Stage';
                }
                currentLevelEl.textContent = currentLevel;
                dailyAverageEl.textContent = Math.ceil(dailyAverage);
                pointsNeededFromBattlesEl.textContent = pointsNeededFromBattles;
                gamesNeededEl.textContent = gamesNeeded;
            };

            const updateUI = () => {
                daysPerWeekValue.textContent = daysPerWeek;
                dailyMissionsValue.textContent = dailyMissions;
                calculateAll();
            };

            const loadState = () => {
                try {
                    const savedState = JSON.parse(localStorage.getItem('wot_calculator_state'));
                    if (savedState) {
                        currentProgress = savedState.currentProgress;
                        activeEventId = savedState.activeEventId;
                        currentServer = savedState.currentServer;
                        daysPerWeek = savedState.daysPerWeek;
                        dailyMissions = savedState.dailyMissions;
                        gamePoints = savedState.gamePoints;
                    }
                } catch (error) {
                    console.error("Error loading state:", error);
                }
            };
            
            const saveState = () => {
                try {
                    const stateToSave = {
                        currentProgress,
                        activeEventId,
                        currentServer,
                        daysPerWeek,
                        dailyMissions,
                        gamePoints
                    };
                    localStorage.setItem('wot_calculator_state', JSON.stringify(stateToSave));
                } catch (error) {
                    console.error("Error saving state:", error);
                }
            };

            const setupEventButtons = () => {
                eventButtons.querySelectorAll('button').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const newEventId = e.target.dataset.event;
                        if (activeEventId !== newEventId) {
                            activeEventId = newEventId;
                            currentProgress = 0;
                            document.getElementById('btn-' + activeEventId).classList.remove('bg-gray-700', 'text-gray-300', 'hover:bg-red-700');
                            document.getElementById('btn-' + activeEventId).classList.add('bg-red-600', 'text-white', 'shadow-lg');
                            document.getElementById('btn-' + (newEventId === 'battlepass17' ? 'battlepass15year' : 'battlepass17')).classList.remove('bg-red-600', 'text-white', 'shadow-lg');
                            document.getElementById('btn-' + (newEventId === 'battlepass17' ? 'battlepass15year' : 'battlepass17')).classList.add('bg-gray-700', 'text-gray-300', 'hover:bg-red-700');
                            updateUI();
                            saveState();
                        }
                    });
                });
            };

            const setupServerButtons = () => {
                serverButtons.querySelectorAll('button').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const newServer = e.target.dataset.server;
                        if (currentServer !== newServer) {
                            currentServer = newServer;
                            serverButtons.querySelectorAll('button').forEach(sBtn => {
                                sBtn.classList.remove('bg-red-600', 'text-white');
                                sBtn.classList.add('bg-gray-700', 'hover:bg-gray-600');
                            });
                            e.target.classList.remove('bg-gray-700', 'hover:bg-gray-600');
                            e.target.classList.add('bg-red-600', 'text-white');
                            updateUI();
                            saveState();
                        }
                    });
                });
            };

            loadState();
            updateUI();
            setInterval(calculateAll, 1000);

            setupEventButtons();
            setupServerButtons();
            
            currentProgressInput.addEventListener('input', (e) => {
                currentProgress = parseInt(e.target.value) || 0;
                updateUI();
                saveState();
            });
            currentProgressRange.addEventListener('input', (e) => {
                currentProgress = parseInt(e.target.value);
                updateUI();
                saveState();
            });
            
            daysPerWeekRange.addEventListener('input', (e) => {
                daysPerWeek = parseInt(e.target.value);
                updateUI();
                saveState();
            });
            
            dailyMissionsRange.addEventListener('input', (e) => {
                dailyMissions = parseInt(e.target.value);
                updateUI();
                saveState();
            });
            
            gamePointsInput.addEventListener('input', (e) => {
                gamePoints = parseFloat(e.target.value) || 0;
                updateUI();
                saveState();
            });
            
            document.getElementById('btn-' + activeEventId).click();
            serverButtons.querySelector(`[data-server="${currentServer}"]`).click();
            currentProgressInput.value = currentProgress;
            daysPerWeekRange.value = daysPerWeek;
            dailyMissionsRange.value = dailyMissions;
            gamePointsInput.value = gamePoints;

        });
    </script>
</body>
</html>
